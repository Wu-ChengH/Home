<div id="groupPortrait">
	<div id="groupPortraitChartBox">
		<div class="container-fluid no-pd">
			<div class="row">
				<div class="col-md-4">
					<div class="layoutBox">
						<div class="layoutBox-header">企业类型分布</div>
						<div class="layoutBox-content" style="height:300px;" id="enterpriseType">
							更好地发挥
						</div>
					</div>
				</div>
				<div class="col-md-5">
					<div class="layoutBox">
						<div class="layoutBox-header">行政区域分布</div>
						<div class="layoutBox-content" style="height:300px;" id="administrative">
							更好地发挥
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="layoutBox">
						<div class="layoutBox-header">综合指数评分</div>
						<div class="layoutBox-content" style="height:300px;" id="comprehensive1">
							更好地发挥
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid no-pd" style="display:none;">
			<div class="row">
				<div class="col-md-4">
					<div class="layoutBox">
						<div class="layoutBox-header">企业类型分布</div>
						<div class="layoutBox-content" style="height:300px;">
							更好地发挥
						</div>
					</div>
				</div>
				<div class="col-md-5">
					<div class="layoutBox">
						<div class="layoutBox-header">行政区域分布</div>
						<div class="layoutBox-content" style="height:300px;">
							更好地发挥
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="layoutBox">
						<div class="layoutBox-header">综合指数评分</div>
						<div class="layoutBox-content" style="height:300px;" id="comprehensive2">
							更好地发挥
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="layoutBox" style="margin-top:30px;">
		<div class="layoutBox-header">群体企业名单</div>
		<div class="layoutBox-content" style="height:400px;" id="groupPortraitTable">
			<table>
				<thead>
					<tr>
						<th>企业名称</th>
						<th>企业地址</th>
						<th>联系人</th>
						<th>联系方式</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
					<tr>
						<td>成都大舍家俱有限公司</td>
						<td>锦江区经天西路23号9幢1层6号</td>
						<td>陈大胜</td>
						<td>13708014661</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
<script rel="script">
    define(function(require){
		require("groupPortrait/css/groupPortrait.css");
        var base = require("Base");
        return base.extend({
			onInit : function(options){
				this.enterpriseType = echarts.init(document.getElementById('enterpriseType'));//企业类型分布
				this.administrative = echarts.init(document.getElementById('administrative'));//行政区域分布
				this.comprehensive1 = echarts.init(document.getElementById('comprehensive1'));//综合指标得分1
				this.buildBtnsEvent();
				this.buildAllCharts();
			},
			buildBtnsEvent : function(){
				$("#groupPortraitTable").loadScroll();
			},
			buildAllCharts : function(){
				var self = this;
				this.buildIndividualCharts();
				var administrativeData = [
					{value:335, name:'武侯区'},
					{value:310, name:'锦江区'},
					{value:234, name:'成华区'},
					{value:135, name:'青羊区'},
					{value:140, name:'金牛区'}
				];
				this.administrative.setOption(self.buildPieChartsOption(administrativeData));
				
				var comprehensiveData = [
					{
						value : [4300, 10000, 28000, 35000, 50000, 19000],
						name : '当前群体'
					},{
						value : [5000, 14000, 28000, 31000, 42000, 21000],
						name : '其他群体'
					}
				];
				this.comprehensive1.setOption(self.buildRadarChartsOption(comprehensiveData));
				
			},
			buildIndividualCharts : function(){
				var self = this;
				var option = {
					tooltip : {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					visualMap: {
						show: false,
						min: 80,
						max: 600,
						inRange: {
							colorLightness: [0, 1]
						}
					},
					color:['#1976d2','#1e88e5', '#42a5f5', '#90caf9', '#bbdefb'],
					series : [
						{
							name:'访问来源',
							type:'pie',
							radius : '75%',
							center: ['50%', '50%'],
							data:[
								{value:335, name:'私人企业'},
								{value:310, name:'外商独资企业'},
								{value:274, name:'中外合资企业'},
								{value:235, name:'集体企业'},
								{value:400, name:'国有企业'}
							].sort(function (a, b) { return a.value - b.value}),
							roseType: 'angle',
							label: {
								normal: {
									textStyle: {
										//color: 'rgba(255, 255, 255, 0.3)'
									}
								}
							},
							labelLine: {
								normal: {
									lineStyle: {
										//color: 'rgba(255, 255, 255, 0.3)'
									},
									length:5,
									length2:20
								}
							},
							itemStyle: {
								normal: {
									shadowBlur: 10,
									shadowColor: 'rgba(0, 0, 0, 0.5)'
								}
							}
						}
					]
				};
				self.enterpriseType.setOption(option);
			},
			
			//构建饼图配置项
			buildPieChartsOption : function(chartData){
				var nameList = [];
				for(var i = 0;i<chartData.length;i++){
					nameList.push(chartData[i].name);
				}
				var option = {
					tooltip: {
						trigger: 'item',
						formatter: "{a} <br/>{b}: {c} ({d}%)"
					},
					legend: {
						orient: 'vertical',
						//left:"right",
						right:"10%",
						align: 'left',
						top:"middle",
						itemWidth:10,
						itemHeight:10,
						data:nameList
					},
					calculable : true,
					color : ["#9ccc65","#f6be1a","#b39ddb","#ff8a65","#42a5f5"],
					series: [
						{
							name:'访问来源',
							type:'pie',
							center: ['40%', '50%'],
							radius: ['50%', '70%'],
							avoidLabelOverlap: false,
							label: {
								normal: {
									show: true,
									formatter : "{d}%",
									textStyle: {
										fontSize: '18',
										fontWeight: 'bold'
									}
								}
							},
							labelLine: {
								normal: {
									show: true,
									length2:0
								}
							},
							data:chartData
						}
					]
				};
				return option;
			},
			
			//构建雷达图配置项
			buildRadarChartsOption : function(chartData){
				var option = {
					legend: {
						//top:"bottom",
						icon:"circle",
						bottom:10,
						itemWidth:9,
						itemHeight:9,
						data: [chartData[0].name, chartData[1].name]
					},
					color:["#ff9600","#8c97cb"],
					radar: {
						shape: 'circle',
						center:["50%","45%"],
						indicator: [
						   { name: '竞争力', max: 6500},
						   { name: '人性化', max: 16000},
						   { name: '占有率', max: 30000},
						   { name: '社会形象', max: 38000},
						   { name: '影响力', max: 52000},
						   { name: '活力', max: 25000},
						   { name: '创新', max: 25000},
						   { name: '健康', max: 25000}
						],
						radius:90
					},
					series: [{
						name: '综合指标得分',
						type: 'radar',
						areaStyle : {
							normal : {
								//color : "#ff0000"
								opacity:0.3
							}	
						},
						data : chartData
					}]
				};
				return option;
			},
			buildAdministrative : function(){
				
			},
			goTargetPage : function(pageUrl){
				this.loadpage({
					$el : this.$("#content"),
					url : pageUrl
				})
			} 
			
		})
	})
</script>